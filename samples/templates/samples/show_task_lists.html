{# -*- indent-tabs-mode: nil -*- #}
{% extends "samples/base.html" %}
{% comment %}
This file is part of Chantal, the samples database.

Copyright (C) 2010 Forschungszentrum JÃ¼lich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load chantal %}
{% load samples_extras %}

{% block frame_content %}
{% for process_class, task_list in task_lists.iteritems %}
    <div><h2>{{ process_class.name|capfirst }}</h2>
        <form method="get" action="/task_lists/add/" style="display: inline">
          <input type="hidden" name="process_class" value="{{ process_class.id }}"/>
	       <input type="submit" value="Add new task"/>
	    </form>
	</div>
    <ul>
    {% for task in task_list %}
        {% if task.user_can_edit %}
          <a class="edit-icon" href="/task_lists/edit/{{ task.id }}" style="position:relative; top:30px; left:37%">
             <img src="{{ STATIC_URL }}chantal/icons/cog_edit.png" alt="edit icon" title="{% trans 'edit task' %}"
             width="16" height="16"/></a>
         {% if user == task.customer %}
             <a class="edit-icon" href="/task_lists/remove/{{ task.id }}" style="position:relative; top:30px; left:36.5%">
               <img src="{{ STATIC_URL }}chantal/icons/cancel.png" alt="remove icon" title="{% trans 'remove task' %}"
               width="16" height="16"/></a>
          {% endif %}
        {% endif %}
        <li style="border-style: solid; border-color: black; border-width: thin; width:40%; margin-top:0px; padding:5px; background-color: {{ task|task_color }}">
            <span class="label">{% verbose_name Task.priority %}:</span>{{ task.priority }}<br/>
            <span class="label">{% verbose_name Task.status %}:</span>{{ task.status }}<br/>
            <span class="label">{% verbose_name Task.operator %}:</span>
            {{ task.operator|get_really_full_name|default_if_none:" " }}<br/>
            <span class="label">{% verbose_name Task.customer %}:</span>
            <a href="{{ task.customer.get_absolute_url }}">{{ task.customer|get_really_full_name }}</a><br/>
            <span class="label">{% verbose_name Task.samples %}:</span>
            <ul class="sample-list">
	        {% for  sample in task.samples %}
	            <li><a href="{{ sample.get_absolute_url }}">{{ sample }}</a></li>
	        {% endfor %}
	        </ul>
	        <span class="label">{% verbose_name Task.creating_timestamp %}:</span>{{ task.creating_timestamp }}<br/>
	        <span class="label">{% verbose_name Task.last_modified %}:</span>{{ task.last_modified }}<br/>
	        <span class="label">{% verbose_name Task.comments %}:</span>{{ task.comments }}
       </li>
    {% endfor %}
    </ul>
{% endfor %}
<div>
<form method="POST" action="">
	{% error_list chose_task_lists _("General error") %}
	<table>
        <tr>
	       <td class="label">{{ chose_task_lists.visible_task_lists.label }}:</td>
	       <td class="input">{{ chose_task_lists.visible_task_lists }}</td>
	   </tr>
	</table>
	<p class="submit-button" style="clear: both"><input type="submit"/></p>
</form>
</div>
{% endblock %}
