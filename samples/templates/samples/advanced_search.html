{# -*- indent-tabs-mode: nil -*- #}
{% extends "samples/base.html" %}
{% comment %}
This file is part of Chantal, the samples database.

Copyright (C) 2010 Forschungszentrum Jülich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load samples_extras %}

{% block local_scripts %}
<script type="text/javascript">
// <![CDATA[
$(function() {
    $('form[method="get"]').submit(function(event) {
        var $target = $(event.target);
        $target.find("input,select,textarea").each(function() {
            if ($(this).val() == "") $(this).attr("disabled", "disabled")
        })
    })
 });
// ]]>
</script>
{% endblock %}

{% block frame_content %}
<form method="get">
  {{ search_root.as_p }}
  {% if search_tree %}
    {% display_search_tree search_tree %}
  {% endif %}
  <p class="submit-button" style="clear: both"><input type="submit" value="{% trans 'search' %}"/></p>
</form>

{% if search_performed %}
  <p>
    {% if too_many_results %}
      {% blocktrans %}
        Too many matches were found.  I show only {{ max_results }} of them.
      {% endblocktrans %}
    {% endif %}
  </p>
  <form method="post">
    {% if results %}
      {% if something_to_add %}
        <p>{% trans 'Mark samples to add them to “My Samples”.' %}</p>
      {% endif %}
      <ul>
        {% for result, add_form in results %}
          <li><a href="{{ result.get_absolute_url }}">{{ result }}</a>
            {% if add_form %}
              {{ add_form.add_to_my_samples }}
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>{% trans 'Nothing found.' %}</p>
    {% endif %}

    <p class="submit-button" style="clear: both"><input type="submit" value="{% trans 'add samples' %}"/></p>
  </form>
{% else %}
  <p>{% trans 'No search was performed yet.' %}</p>
{% endif %}

{% endblock %}
