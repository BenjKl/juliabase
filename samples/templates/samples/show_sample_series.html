{# -*- indent-tabs-mode: nil -*- #}
{% extends "samples/base.html" %}
{% comment %}
This file is part of Chantal, the samples database.

Copyright (C) 2010 Forschungszentrum JÃ¼lich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load chantal %}
{% load samples_extras %}

{% block content_title %}{% spaceless %}<h1>{{ title }}{% if can_edit %}<a 
                           class="edit-icon"
                           href="{% url samples.views.sample_series.edit name=sample_series.name|urlencode %}"
           ><img src="{{ MEDIA_URL }}chantal/icons/pencil.png" alt="edit icon" title="{% trans 'edit' %}"
                 width="16" height="16"/></a
     >{% endif %}
  {% if can_add_result %}<a class="edit-icon"
  href="{% url add_result %}?sample_series={{ sample_series.name|urlquote_plus }}&amp;next={{ sample_series.get_absolute_url|urlquote_plus }}"
   ><img src="{{ MEDIA_URL }}chantal/icons/lightbulb_add.png" alt="add-result icon" title="{% trans 'add result' %}"
         width="16" height="16"/></a>{% endif %}
  <a class="edit-icon" 
  href="{% url samples.views.sample_series.export name=sample_series.name|urlencode %}?next={{ sample_series.get_absolute_url|urlquote_plus }}"
     ><img src="{{ MEDIA_URL }}chantal/icons/table.png" alt="export icon" width="16" height="16"
           title="{% trans 'export as table' %}"/></a>
</h1>{% endspaceless %}{% endblock %}

{% block frame_content %}

{{ sample_series.description|markdown_samples }}

{% if sample_series.samples.count %}
  <p>{% trans 'This sample series contains the following samples:' %}</p>
  <ul class="sample-list">
    {% for sample in sample_series.samples.all %}
      <li><a href="{{ sample.get_absolute_url }}">{{ sample }}</a>
        {% if sample.purpose %}({{ sample.purpose }}){% endif %}</li>
    {% endfor %}
  </ul>
{% else %}
  <p>{% trans "This sample series doesn't contain samples yet." %}</p>
{% endif %}

<p>{% trans 'Topic' %}: <strong>{{ sample_series.topic }}</strong>,
  {% trans 'currently responsible person' %}:
  {{ sample_series.currently_responsible_person|get_really_full_name }}
</p>

{% for process in result_processes %}
  <div class="process">
    <p class="operator_and_timestamp">
      {{ process.operator|get_really_full_name }}, {{ process.timestamp }}
    </p>
    <h2>{{ process.name }}{% if process.edit_url %}<a class="edit-icon" 
                   href="{{ process.edit_url }}?next={{ sample_series.get_absolute_url|urlquote_plus }}"
             ><img src="{{ MEDIA_URL }}chantal/icons/cog_edit.png" alt="edit icon" title="{% trans 'edit' %}"
                   width="16" height="16"/></a>{% endif %}</h2>
    {{ process.html_body }}
  </div>
{% endfor %}
{% endblock %}
