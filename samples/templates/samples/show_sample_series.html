{# -*- indent-tabs-mode: nil -*- #}
{% extends "samples/base.html" %}
{% load i18n %}
{% load chantal %}
{% load samples_extras %}

{% block content_title %}{% spaceless %}<h1>{{ title }}{% if can_edit %}<a 
                           class="edit-icon" href="{% url samples.views.sample_series.edit name=sample_series.name %}"
           ><img src="{{ MEDIA_URL}}samples/icons/pencil.png" alt="edit icon" title="{% trans 'edit' %}"/></a
     >{% endif %}
  {% if can_add_result %}<a class="edit-icon"
  href="{% url add_result %}?sample_series={{ sample_series.name|urlquote_plus }}&next={{ sample_series.get_absolute_url|urlquote_plus }}"
   ><img src="{{ MEDIA_URL}}samples/icons/lightbulb_add.png" alt="add-result icon" title="{% trans 'add result' %}"/></a>{% endif %}
  <a class="edit-icon" 
  href="{% url samples.views.sample_series.export name=sample_series.name %}?next={{ sample_series.get_absolute_url|urlquote_plus }}"
     ><img src="{{ MEDIA_URL}}samples/icons/table.png" alt="export icon"
           title="{% trans 'export as table' %}"/></a>
</h1>{% endspaceless %}{% endblock %}

{% block frame_content %}

{{ sample_series.description|markdown_samples }}

{% if sample_series.samples.count %}
  <p>{% trans 'This sample series contains the following samples:' %}</p>
  <ul class="sample-list">
    {% for sample in sample_series.samples.all %}
      <li><a href="{{ sample.get_absolute_url }}">{{ sample }}</a>
        {% if sample.purpose %}({{ sample.purpose }}){% endif %}</li>
    {% endfor %}
  </ul>
{% else %}
  <p>{% trans "This sample series doesn't contain samples yet." %}</p>
{% endif %}

<p>{% trans 'Project' %}: <strong>{{ sample_series.project }}</strong>,
  {% trans 'currently responsible person' %}:
  {{ sample_series.currently_responsible_person|get_really_full_name }}
</p>

{% for process in result_processes %}
  <div class="process">
    <p class="operator_and_timestamp">
      {{ process.operator|get_really_full_name }}, {{ process.timestamp }}
    </p>
    <h2>{{ process.name }}{% if process.edit_url %}<a class="edit-icon" 
                   href="{{ process.edit_url }}?next={{ sample_series.get_absolute_url|urlquote_plus }}"
             ><img src="{{ MEDIA_URL}}samples/icons/cog_edit.png" alt="edit icon" title="{% trans 'edit' %}"/></a
        >{% endif %}</h2>
    {{ process.html_body }}
  </div>
{% endfor %}
{% endblock %}
