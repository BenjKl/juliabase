{# -*- indent-tabs-mode: nil -*- #}
{% extends "jb_common/base.html" %}
{% comment %}
This file is part of JuliaBase, the samples database.

Copyright (C) 2010 Forschungszentrum JÃ¼lich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load juliabase %}

{% block refresh_tag %}
  <meta http-equiv="refresh" content="600"/>
{% endblock %}

{% block local_scripts %}
  <script type="text/javascript">
    // <![CDATA[
    google.load("visualization", "1", {packages: ["gauge"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn("string", "Label");
    data.addColumn("number", "Value");
    data.addRows(1);
    data.setValue(0, 0, "{% trans 'hit rate' %}/%");
    data.setValue(0, 1, {{ cache_hit_rate }});
    var chart = new google.visualization.Gauge(document.getElementById("cache_hit_rate"));
    var options = {width: 200, height: 200, redFrom: 0, redTo: 10, majorTicks: ["0", "", "", "", "", "100"],
                       minorTicks: 2};
    chart.draw(data, options);

    var data = new google.visualization.DataTable();
    data.addColumn("string", "Label");
    data.addColumn("number", "Value");
    data.addRows(1);
    data.setValue(0, 0, "{% trans 'connect.' %}");
    data.setValue(0, 1, {{ cache_connections.0 }});
    var chart = new google.visualization.Gauge(document.getElementById("cache_connections"));
    var options = {width: 200, height: 200, max: {{ cache_connections.1 }}, redFrom: {{ cache_connections.1|times08 }},
               redTo: {{ cache_connections.1 }},
               majorTicks: ["0", "", "{{ cache_connections.1 }}"], minorTicks: 4};
    chart.draw(data, options);
    }
    // ]]>
  </script>
{% endblock %}

{% block css %}
<style type="text/css">
  img { border: 0pt }
  th { text-align: left }
  td { vertical-align: top }
</style>
{% endblock %}

{% block frame_content %}

<h2>{% trans 'Cache status' %}</h2>

<div id="cache_hit_rate"></div>
<div id="cache_connections"></div>

{% endblock %}
