{# -*- indent-tabs-mode: nil -*- #}
{% extends "base.html" %}
{% load i18n %}
{% load samples_extras %}

{% block title %}{% trans 'History of sample “' %}{{ sample.name }}{% trans '”' %}{% endblock %}
{% block content_title %}<h1>{% trans 'History of sample “' %}{{ sample.name }}{% trans '”' %}
  <span class="aliases">{% for alias in sample.aliases.all %}
    alias <strong>{{ alias }}</strong> {% endfor %}</span>
  {% if can_edit %}<a class="edit-button"
                      href="{{ sample.get_absolute_url }}/edit/?next={{ sample.get_absolute_url|urlquote_plus }}"
                      >{% trans 'edit' %}</a>{% endif %}
  {% if can_add_process %}<a class="edit-button" href="{{ sample.get_absolute_url }}/add_process/"
                             >{% trans 'add process' %}</a>{% endif %}</h1>{% endblock %}

{% block css %}
<style type="text/css">
  form p { text-align: right; margin-bottom: 0pt }
</style>
{% endblock %}

{% block content %}
  {{ session.last_db_time_in_ms }}
  {% for process in processes %}
    <div class="process">
      <p class="operator_and_timestamp">
        {{ process.operator|get_really_full_name }}, {{ process|timestamp }}
      </p>
      <h2>{{ process.name }}{% if process.edit_url %}
            <a class="edit-button" href="{{ process.edit_url }}?next={{ sample.get_absolute_url|urlquote_plus }}"
               >{% trans 'edit' %}</a>{% endif %}</h2>
      {{ process.html_body }}
    </div>
  {% endfor %}
  <form method="post" action="">
    {{ is_my_sample_form.as_p }}
    <p class="submit-button" style="margin-top: 0pt"><input type="submit" /></p>
  </form>
{% endblock %}
