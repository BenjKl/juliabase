{# -*- indent-tabs-mode: nil -*- #}
{% extends "base.html" %}
{% load i18n %}
{% load samples_extras %}

{% block content_title %}<h1>{{ title|escape }}
  {% if can_edit %}<a class="edit-button" href="edit/{{ sample_series.name }}"
                      >{% trans 'edit' %}</a>{% endif %}</h1>{% endblock %}

{% block content %}
{% if sample_series.samples.count %}
  <p>{% trans 'This sample series contains the following samples:' %}</p>
  <ul>
    {% for sample in sample_series.samples.all %}
      <li><a href="../../samples/{{ sample.name|name2url }}">{{ sample.name }}</a>
        {% if sample.purpose %}({{ sample.purpose }}){% endif %}</li>
    {% endfor %}
  </ul>
{% else %}
  <p>{% trans "This sample series doesn't contain samples yet." %}</p>
{% endif %}

<p>{% trans 'Group' %}: <strong>{{ sample_series.group }}</strong>,
  {% trans 'currently responsible person' %}:
  {% with sample_series.currently_responsible_person.get_full_name as full_name %}
  <a href="../users/{{ sample_series.currently_responsible_person.username}} "
     >{% if full_name %}{{ full_name }}{% else %}{{ sample_series.currently_responsible_person }}{% endif %}</a>
  {% endwith %}
</p>

{% for process in result_processes %}
  <div class="process">
    <p class="operator_and_timestamp">
      {% with process.operator.get_full_name as full_name %}
        <a href="../users/{{ process.operator.username}} "
           >{% if full_name %}{{ full_name }}{% else %}{{ process.operator }}{% endif %}</a>,
      {% endwith %}
      {{ process.timestamp }}
    </p>
    <h2>{{ process.name }}{% if process.edit_url %}
          <a class="edit-button" href="../{{ process.edit_url }}">{% trans 'edit' %}</a>{% endif %}</h2>
    {{ process.html_body }}
  </div>
{% endfor %}
{% endblock %}
