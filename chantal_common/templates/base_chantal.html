{# -*- indent-tabs-mode: nil -*- #}
{% extends "site_base.html" %}
{% comment %}
This file is part of Chantal, the samples database.

Copyright (C) 2010 Forschungszentrum JÃ¼lich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load chantal %}

{% block extrahead %}
  {% block css_inclusions %}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ STATIC_URL }}chantal/css/main.css"/>
    <link rel="stylesheet" type="text/css" media="print" href="{{ STATIC_URL }}chantal/css/print.css"/>
  {% endblock %}
  <!-- FixMe: We have no favicon yet. -->
  <link rel="shortcut icon" href="{{ STATIC_URL }}chantal/favicon.ico" type="image/x-icon"/>
  <script type="text/javascript" src="{{ STATIC_URL }}chantal/js/jquery-1.5.min.js"></script>
  <script type="text/javascript">
  // <![CDATA[
    $(function() { $("input:text:visible:first").focus() })
  // ]]>
  </script>
  {% block local_scripts %}{% endblock %}
{% endblock %}

{% block content %}
  <table class="headbar">
    <tr>
      <td class="info">
        {% for translation_flag in translation_flags %}
          <a href="{{ translation_flag.2 }}"
             ><img src="{{ STATIC_URL }}chantal/flags/{{ translation_flag.0 }}.png"
                   alt="{% blocktrans with translation_flag.1 as language %}switch to {{ language }}{% endblocktrans %}"
                   width="16" height="11"/></a>
        {% endfor %}
      </td>
      <td class="login-data">
        {% if user.is_authenticated %}
          {% trans 'Welcome,' %}
          {% if user.first_name %}{{ user.first_name|escape }}{% else %}{{ user.username }}{% endif %}.
          {# FixMe: Must be redirected to real main menu page of chantal_common, once it exists. #}
          <a href="/"
             ><img src="{{ STATIC_URL }}chantal/icons/house.png" alt="home icon" title="{% trans 'Main menu' %}"
                   width="16" height="16"/></a>
          <a href="/trac/newticket?reporter={{ user.email|urlquote_plus }}"
               ><img src="{{ STATIC_URL }}chantal/icons/bug_add.png" alt="add-bug icon"
                     title="{% trans 'Report feature wish or bug' %}" width="16" height="16"/></a>
          {% if help_link %} <a href="/trac/wiki/{{ help_link }}"><img width="16" height="16"
             src="{{ STATIC_URL }}chantal/icons/help.png" alt="help icon" title="{% trans 'Help' %}"/></a>{% endif %}
          <a href="{% url 'django.contrib.auth.views.logout' %}"
             ><img src="{{ STATIC_URL }}chantal/icons/door_open.png" alt="log-out icon" title="{% trans 'Log out' %}"
                   width="16" height="16"/></a>
        {% else %}
          {% if help_link %}<a href="/trac/wiki/{{ help_link }}"><img width="16" height="16"
            src="{{ STATIC_URL }}chantal/icons/help.png" alt="help icon" title="{% trans 'Help' %}"/></a> /{% endif %}
          {# FixMe: Must be redirected to real main menu page of chantal_common, once it exists. #}
          <a href="/"><img src="{{ STATIC_URL }}chantal/icons/house.png" width="16" height="16"
                           alt="log-in icon" title="{% trans 'Log in' %}"/></a>
        {% endif %}
      </td>
    </tr>
  </table>

  {% if messages %}
    {% for message in messages %}
      <div class="success-report"><span{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</span></div>
    {% endfor %}
  {% endif %}

  <div class="main">
    <div class="screen-only">
      <p class="logo-text">{% block app_title %}{% endblock %}</p>
    </div>

    <div class="outer-frame">
      <div class="inner-frame">
        {% block float_image %}{% endblock %}
    {% block content_title %}<h1>{{ title }}</h1>{% endblock %}
    {% block frame_content %}{% endblock %}
        <div style="clear: both"></div>
      </div>
    </div>
  </div>
{% endblock %}
