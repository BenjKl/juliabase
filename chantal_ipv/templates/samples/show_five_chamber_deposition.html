{# -*- indent-tabs-mode: nil -*- #}
{% comment %}
This file is part of Chantal, the samples database.

Copyright (C) 2010 Forschungszentrum Jülich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load chantal %}
{% load samples_extras %}
{% load ipv_extras %}

<p>
  <span class="label">{% verbose_name Deposition.number %}:</span><span class="value">{{ process.number }}</span>
</p>

{% if process.comments %}
  <p>
    <span class="label">{% verbose_name FiveChamberDeposition.comments %}:</span>
  </p>
  <blockquote>{{ process.comments|markdown_samples }}</blockquote>
{% endif %}

<table style="width: 100%">
  <tbody>
  {% for layer in process.layers.all %}
  <tr>
    <td style="border-style: solid; border-color: black; border-width: thin">
      <table style="width: 100%">
        <tbody>
        <tr>
          <td class="label">{% verbose_name FiveChamberLayer.number %}:</td>
          <td class="value">{{ layer.number|three_digits }}</td>
          {% value_field layer.sih4 "sccm" %}
          {% value_field layer.power "W" %}
        </tr>
        <tr>
          {% value_field layer.layer_type %}
          {% value_field layer.h2 "sccm" %}
          {% value_field layer.pressure "Torr" %}
        </tr>
        <tr>
          <td class="label">{% verbose_name FiveChamberLayer.chamber %}:</td>
          <td class="value">{{ layer.get_chamber_display }}</td>
          <td class="label">{% trans 'Silane conc.' %}:</td>
          <td class="value">{{ layer|calculate_silane_concentration|quantity:"%"|default_if_none:"—" }}</td>
          {% value_split_field layer.temperature_1 layer.temperature_2 "℃" %}
        </tr>
        <tr>
          {% value_field layer.date %}
          {% value_field layer.tmb "sccm" %}
          <td class="label">{% verbose_name FiveChamberLayer.hf_frequency %}:</td>
          <td class="value">{% if layer.hf_frequency %}{{ layer.get_hf_frequency_display }} MHz{% else %}—{% endif %}</td>
        </tr>
        <tr>
          <td colspan="2"></td>
          {% value_field layer.ch4 "sccm" %}
          {% value_field layer.time "sec" %}
        </tr>
        <tr>
          <td colspan="2"></td>
          {% value_field layer.co2 "sccm" %}
          {% value_field layer.dc_bias "V" %}
        </tr>
        <tr>
        {% value_field layer.in_situ_measurement %}
        {% value_field layer.ph3 "sccm" %}
        {% value_field layer.electrodes_distance "mm" %}
        </tr>
        <tr>
          <td class="label">{% verbose_name FiveChamberLayer.data_file %}:</td>
          <td class="value">
            {% if layer.data_file %}
              <a style="font-weight: normal" href="{% ifequal browser_system 'windows' %}file:///P:{% else %}file:///mnt{% endifequal %}/public_user/LABOR%20USER/5k_PECVD/{{ layer.data_file|urlquote }}">P:/public_user/LABOR USER/5k_PECVD/{{ layer.data_file }}</a>
            {% else %}
              —
            {% endif %}
          </td>
          <td class="label">{% verbose_name FiveChamberLayer.impurity %}:</td>
          <td class="value">{% if layer.impurity %}{{ layer.get_impurity_display }}{% else %}—{% endif %}</td>
          {% value_field layer.base_pressure "Torr" %}
        </tr>
        </tbody>
      </table>
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>
