{# -*- indent-tabs-mode: nil -*- #}
{% comment %}
This file is part of Chantal, the samples database.

Copyright (C) 2010 Forschungszentrum Jülich, Germany,
                   Marvin Goblet <m.goblet@fz-juelich.de>,
                   Torsten Bronger <t.bronger@fz-juelich.de>

You must not use, install, pass on, offer, sell, analyse, modify, or distribute
this software without explicit permission of the copyright holder.  If you have
received a copy of this software without the explicit permission of the
copyright holder, you must destroy it immediately and completely.
{% endcomment %}

{% load i18n %}
{% load samples_extras %}
{% load ipv_extras %}

{% if processes %}
  <table class="lab-notebook">
    <thead>
      <tr>
        <th class="top">{% trans 'number' %}</th>
        <th class="top">{% trans 'sample' %}</th>
        <th class="top">{% trans 'manufacturer' %}</th>
        <th class="top">{% trans 'λ<sub>ex.</sub>' %}</th>
        <th class="top">{% trans 'eval.' %}</th>
        <th class="top">I<sub>c</sub><sup>RS</sup></th>
        <th class="top">{% trans 'filename' %}</th>
        <th class="top">{% trans 'comments' %}</th>
      </tr>
    </thead>
    <tbody>
      {% for measurement in processes %}
      {% lab_notebook_comments measurement "before" %}
        <tr style="vertical-align: top">
          <td{% if forloop.first %} class="top"{% endif %}{% if forloop.last %} style="border-bottom: 2px solid"{% endif %}><a href="{{ measurement.get_absolute_url }}">{{ measurement.number }}</a></td>
          <td{% if forloop.first %} class="top"{% endif %}{% if forloop.last %} style="border-bottom: 2px solid"{% endif %}><a href="{{ measurement.samples.all.0.get_absolute_url }}">{{ measurement.samples.all.0 }}</a></td>
          <td{% if forloop.first %} class="top"{% endif %}{% if forloop.last %} style="border-bottom: 2px solid"{% endif %}>{{ measurement.samples.all.0.currently_responsible_person|get_really_full_name }}</td>
          <td{% if forloop.first %} class="top"{% endif %}{% if forloop.last %} style="border-bottom: 2px solid"{% endif %}>{{ measurement.get_excitation_wavelength_display }}</td>
          <td{% if forloop.first %} class="top"{% endif %} style="text-align: center{% if forloop.last %}; border-bottom: 2px solid{% endif %}">{% if measurement.evaluated_datafile %}<img src="{{ STATIC_URL }}chantal/icons/tick.png" alt="tick icon" title="{% trans 'evaluated' %}" width="16" height="16"/>{% endif %}</td>
          <td{% if forloop.first %} class="top"{% endif %} style="text-align: '.'{% if forloop.last %}; border-bottom: 2px solid{% endif %}">{{ measurement.icrs|default_if_none:"" }}</td>
          <td{% if forloop.first %} class="top"{% endif %}{% if forloop.last %} style="border-bottom: 2px solid"{% endif %}>{{ measurement.datafile|basename }}</td>
          <td{% if forloop.first %} class="top"{% endif %}{% if forloop.last %} style="border-bottom: 2px solid"{% endif %}><div style="float: right; marging-left: 3em; border-left: 1px solid;
                            border-bottom: 1px solid" class="timestamp">
                  {{ measurement|timestamp:"3" }}</div>{{ measurement.comments|flatten_multiline_text }}</td>
        </tr>
      {% lab_notebook_comments measurement "after" %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>{% trans 'No data found for this time range.' %}</p>
{% endif %}
